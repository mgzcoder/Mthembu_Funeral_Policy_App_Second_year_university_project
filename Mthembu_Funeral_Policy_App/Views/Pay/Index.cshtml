
@{ ViewBag.Title = "Pay Now Using PayGate"; }
<style>
    .hidden {
        display: none;
    }

    li {
        font-size: 18px;
        list-style-type: none;
    }

    #results {
        display: block;
        text-align: center;
    }

    #paygate {
        display: none;
    }
    /*!
        * Bootstrap v3.4.1 (https://getbootstrap.com/)
        * Copyright 2011-2019 Twitter, Inc.
        * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
        */
    /*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */

    .body {
        margin-top: 0%;
        background-color: #F9F9F9;
        background-size: 100%;
    }

    .topnav {
        position: relative;
        overflow: hidden;
        background-color: #F3EFEF;
        text-align: center;
        color: #1D1D2C;
    }

        .topnav ul {
            padding: 0px;
            margin: 0px;
            text-align: center;
            display: inline-block;
            vertical-align: top;
            margin-top: 35px;
            margin-bottom: 35px;
            color: #1D1D2C;
        }

        .topnav li {
            float: left;
            display: block;
            color: #1D1D2C;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 18px;
            line-height: 10px;
        }

            .topnav li:hover {
                color: #cca63f;
            }

            .topnav li.active {
                color: #cca63f;
            }

        .topnav .icon {
            display: none;
        }

    .column {
        float: left;
        width: 25%;
        padding: 5px;
        margin-right: 10%;
        margin: 0.0001%;
    }

    .column1 {
        float: left;
        width: 50%;
        padding: 5px;
        margin-right: 10%;
        margin: 0.0001%;
    }

    .column2 {
        float: left;
        width: 33.33333333333%;
        padding: 5px;
        margin: 0.0001%;
    }

    .row::after {
        content: "";
        clear: both;
        display: table;
    }



    .topnav li.icon {
        float: right;
        display: block;
    }

    .topnav.responsive {
        position: relative;
    }

        .topnav.responsive .icon {
            position: absolute;
            right: 0;
            top: 0;
        }


        .topnav.responsive li {
            float: none;
            display: block;
            text-align: left;
            height ="100px"
        }


    .auto-style5 {
        margin-left: 123px;
    }

    .form-popup {
        display: none;
        opacity: 5;
        position: fixed;
        text-align: center;
        top: 25%;
        width: 320px;
        border: 3px solid #FF6600;
        z-index: 9;
        background-color: #F5F5DC;
    }

    hr.hrformat {
        border: 2px solid #FF6600;
    }

    .auto-style1 {
        color: #FF6600;
    }

    .auto-style6 {
        margin-left: 0px;
    }

    .auto-style7 {
        margin-left: 120px;
    }

    .div {
        background-image: url(~/Icons/logo.jpeg)
    }

    .h2 {
        overflow: hidden;
        text-align: center;
        color: #1D1D2C;
    }

        .h2:before,
        .h2:after {
            background-color: gray;
            content: "";
            display: inline-block;
            height: 1px;
            position: relative;
            vertical-align: middle;
            width: 10%;
        }

        .h2:before {
            right: 0.5em;
            margin-left: -50%;
        }

        .h2:after {
            left: 0.5em;
            margin-right: -50%;
        }

    .h1 {
        overflow: hidden;
        text-align: center;
        color: #1D1D2C;
    }

        .h1:before,
        .h1:after {
            background-color: #1D1D2C;
            content: "";
            display: inline-block;
            height: 1px;
            position: relative;
            vertical-align: middle;
            width: 8%;
        }

        .h1:before {
            right: 0.5em;
            margin-left: -50%;
        }

        .h1:after {
            left: 0.5em;
            margin-right: -50%;
        }

    .h3 {
        overflow: hidden;
        text-align: center;
        color: #1D1D2C;
    }

        .h3:before,
        .h3:after {
            background-color: gray;
            content: "";
            display: inline-block;
            height: 1px;
            position: relative;
            vertical-align: middle;
            width: 10%;
        }

        .h3:before {
            right: 0.5em;
            margin-left: -50%;
        }

        .h3:after {
            left: 0.5em;
            margin-right: -50%;
        }

    .dropdown {
        position: relative;
        display: inline-block;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #1D1D2C;
        min-width: 160px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        padding: 10px 14px;
        z-index: 1;
    }

    .dropdown:hover .dropdown-content {
        display: block;
    }

    .input[type=text], select {
        width: 100%;
        padding: 12px 20px;
        margin: 8px 0;
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }

    .input[type=submit] {
        width: 100%;
        background-color: #4CAF50;
        color: white;
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .centerlook {
        padding-left: 400px;
        font-weight: bold;
        width: 1000px;
    }

    .background1 {
        background-image: url('../../Images/funeral-memorial-service-feature.jpg');
        background-size: 100%;
    }

    li.a {
        list-style-type: circle;
    }

    .vl {
        border-left: 2px solid green;
        height: 50px;
    }

    #more {
        display: none;
    }

    .mapouter {
        position: relative;
        text-align: right;
        height: 327px;
        width: 50%;
    }

    .gmap_canvas {
        overflow: hidden;
        background: none !important;
        height: 327px;
        width: 50%;
    }

    .emp-profile {
        padding: 3%;
        margin-top: 3%;
        margin-bottom: 3%;
        border-radius: 0.5rem;
        background: #fff;
    }

    .profile-img {
        text-align: center;
    }

        .profile-img img {
            width: 70%;
            height: 100%;
        }

        .profile-img .file {
            position: relative;
            overflow: hidden;
            margin-top: -20%;
            width: 70%;
            border: none;
            border-radius: 0;
            font-size: 15px;
            background: #212529b8;
        }

            .profile-img .file input {
                position: absolute;
                opacity: 0;
                right: 0;
                top: 0;
            }

    .profile-head h5 {
        color: #333;
    }

    .profile-head h6 {
        color: #0062cc;
    }

    .profile-edit-btn {
        border: none;
        border-radius: 1.5rem;
        width: 70%;
        padding: 2%;
        font-weight: 600;
        color: #6c757d;
        cursor: pointer;
    }

    .proile-rating {
        font-size: 12px;
        color: #818182;
        margin-top: 5%;
    }

        .proile-rating span {
            color: #495057;
            font-size: 15px;
            font-weight: 600;
        }

    .profile-head .nav-tabs {
        margin-bottom: 5%;
    }

        .profile-head .nav-tabs .nav-link {
            font-weight: 600;
            border: none;
        }

            .profile-head .nav-tabs .nav-link.active {
                border: none;
                border-bottom: 2px solid #0062cc;
            }

    .profile-work {
        padding: 14%;
        margin-top: -15%;
    }

        .profile-work p {
            font-size: 12px;
            color: #818182;
            font-weight: 600;
            margin-top: 10%;
        }

        .profile-work a {
            text-decoration: none;
            color: #495057;
            font-weight: 600;
            font-size: 14px;
        }

        .profile-work ul {
            list-style: none;
        }

    .profile-tab label {
        font-weight: 600;
    }

    .profile-tab p {
        font-weight: 600;
        color: #0062cc;
    }

    div.scroll {
        overflow-x: scroll;
        overflow-y: auto;
    }

    .form-popup {
        display: none; /* Hidden by default */
        z-index: 1; /* Sit on top */
        top: 5%;
        display: none;
        width: 90%;
        text-align: center;
        overflow: auto;
        background-color: #FAFAD2;
    }

    .hr {
        border: 1px solid red;
    }
</style>

<div class="jumbotron">
    <h1>PayGate</h1>
    <p class="lead"><b>PayWeb</b> is an easy and secure way to accept payments online. The Customer makes payments using PayGate’s secure hosted payment page. PayWeb is mobile-friendly making it compatible across all mobile devices.</p>
    <p><a target="_blank" href="http://docs.paygate.co.za/" class="btn btn-primary btn-lg">Paygate docs &raquo;</a></p>
</div>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            @Html.ActionLink("PayGate", "Index", "Pay", new { area = "" }, new { @class = "navbar-brand" })
        gyffyvcyfvyvy6vygvy
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li>@Html.ActionLink("Home", "Index", "Home")</li>
            </ul>
            
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <h2></h2>
        <hr />
        <div class="col-md-12">
            <p class="text-center">
                <button class="btn btn-success btn-lg" id="btn-pay">
                    PAY NOW
                    <span class="glyphicon glyphicon-lock"></span>
                </button>
            </p>
            <br />
            <p class="text-center">
                <ul class="text-info" id="results"></ul>
            </p>
            <br />
            <div class="hidden">
                <form action="https://secure.paygate.co.za/payweb3/process.trans" method="POST">
                    <input id="PAY_REQUEST_ID" name="PAY_REQUEST_ID" type="hidden" />
                    <input id="CHECKSUM" name="CHECKSUM" type="hidden" />
                    <input id="REDIRECT" type="submit" />
                </form>
            </div>
        </div>
        <br /><br />
    </div>
</div>

<script type="text/javascript" src="~/Scripts/jquery-3.3.1.min.js"></script>
<script type="text/javascript">
    $('#btn-pay').on('click', function () {
        let node = document.createElement("li");
        node.innerText = "Processing...";
        document.querySelector("#results").appendChild(node);

        $.get(`/pay/getrequest`)
            .done(data => success(data))
            .fail(err => error(err));
    });

    function success(data) {
        let requestNode = document.createElement("li");
        requestNode.innerText = "Request retrieved";
        document.querySelector("#results").appendChild(requestNode);

        requestNode.innerText = data.message;
        if (data.success) {
            $("#PAY_REQUEST_ID").val(data.results.PAY_REQUEST_ID);
            $("#CHECKSUM").val(data.results.CHECKSUM);


            let redirectNode = document.createElement("li");
            redirectNode.innerText = "Redirecting...";
            document.querySelector("#results").appendChild(redirectNode);

            document.querySelector("#REDIRECT").click();
        }
    }

    function error(data) {
        console.log("Error");
        let node = document.createElement("li");
        node.innerText = data;
        document.querySelector("#results").appendChild(node);
    }
</script>

